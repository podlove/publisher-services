{
  "packages": ["nodejs@latest", "elixir@latest", "erlang@latest"],
  "env": {
    "DEVBOX_COREPACK_ENABLED": "true"
  },
  "shell": {
    "init_hook": [
      "mkdir -p .nix-mix",
      "mkdir -p .nix-hex",
      "export MIX_HOME=$PWD/.nix-mix",
      "export HEX_HOME=$PWD/.nix-hex",
      "export ERL_AFLAGS='-kernel shell_history enabled'",
      "mix local.hex --force",
      "mix local.rebar --force"
    ],
    "scripts": {
      "bootstrap:client": ["cd client", "pnpm install"],
      "bootstrap:server": ["cd server", "mix deps.get"],
      "bootstrap": ["devbox run bootstrap:client", "devbox run bootstrap:server"],
      "server": ["cd server", "mix phx.server"],
      "server:interactive": ["cd server", "iex -S mix phx.server"],
      "server:format": ["cd server", "mix format"],
      "client": ["cd client", "pnpm run dev"]
    }
  }
}
